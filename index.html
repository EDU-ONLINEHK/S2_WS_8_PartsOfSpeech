<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>DSE ä¸­æ–‡ç§‘ â€” è©æ€§æ”»ç•¥æŒ‡å— (Demo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Minimal reset for the demo */
      body { background: #f5f5f4; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- React + ReactDOM UMD -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel standalone for in-browser JSX transpile (dev/demo only) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
// å°å‹ icon æ›¿ä»£ï¼šä½¿ç”¨ emoji åšå ä½ï¼ˆä¾¿æ–¼ CDN-free demoï¼‰
const BookOpen = ({className}) => <span className={className}>ğŸ“˜</span>;
const Type = ({className}) => <span className={className}>ğŸ”¤</span>;
const Eye = ({className}) => <span className={className}>ğŸ‘ï¸</span>;
const EyeOff = ({className}) => <span className={className}>ğŸš«</span>;
const Menu = ({className}) => <span className={className}>â‰¡</span>;
const X = ({className}) => <span className={className}>âœ–</span>;
const ChevronDown = ({className}) => <span className={className}>â–¾</span>;
const ChevronUp = ({className}) => <span className={className}>â–´</span>;
const Brain = ({className}) => <span className={className}>ğŸ§ </span>;
const CheckCircle = ({className}) => <span className={className}>âœ”ï¸</span>;
const XCircle = ({className}) => <span className={className}>âœ–ï¸</span>;
const RefreshCcw = ({className}) => <span className={className}>ğŸ”„</span>;
const Star = ({className}) => <span className={className}>â­</span>;
const FileText = ({className}) => <span className={className}>ğŸ“„</span>;
const Activity = ({className}) => <span className={className}>âš¡</span>;
const HelpCircle = ({className, size}) => <span className={className}>â“</span>;
const Zap = ({className}) => <span className={className}>âš¡</span>;
const User = ({className}) => <span className={className}>ğŸ‘¤</span>;
const Hash = ({className}) => <span className={className}>#</span>;
const LinkIcon = ({className}) => <span className={className}>ğŸ”—</span>;
const MessageCircle = ({className}) => <span className={className}>ğŸ’¬</span>;
const Mic = ({className}) => <span className={className}>ğŸ¤</span>;
const ArrowRight = ({className}) => <span className={className}>â¡ï¸</span>;

// ä»¥ä¸‹ç‚ºä½¿ç”¨è€…æä¾›çš„ä¸»è¦ React å…ƒä»¶ï¼ˆå·²ç°¡åŒ– icon ä¾è³´ï¼‰
const THEORY_DATA = [
  { id: 'noun', type: 'content', title: 'åè© (Nouns)', color: 'bg-blue-300', icon: <BookOpen className="w-8 h-8" />, definition: 'è¡¨ç¤ºäººã€äº‹ç‰©ã€æ™‚é–“ã€è™•æ‰€ç­‰åç¨±çš„è©ã€‚', categories: [ { name: 'äººç‰©åè©', examples: 'é­¯è¿…ã€çˆ¶è¦ªã€ä½œå®¶' }, { name: 'äº‹ç‰©åè©', examples: 'åœ‹å®¶ã€æ¨¹æœ¨ (å…·é«”)ï¼›æ€æƒ³ã€æ–‡åŒ– (æŠ½è±¡)' }, { name: 'è™•æ‰€åè©', examples: 'é¦™æ¸¯ã€åŒ—äº¬ã€é™„è¿‘ã€å‘¨åœ' }, { name: 'æ™‚é–“åè©', examples: 'ä»Šå¹´ã€æ—©æ™¨ã€ç¾åœ¨ã€å‰›æ‰' }, { name: 'æ–¹ä½åè©', examples: 'ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å‰ã€å¾Œ' }, ], features: [ 'ä¸»è¦å……ç•¶ä¸»èªã€è³“èªã€‚', 'å—æ•¸é‡è©ä¿®é£¾ (å¦‚ï¼šä¸€å€‹äºº)ã€‚', 'ä¸€èˆ¬ä¸å—å‰¯è© (ä¸/å¾ˆ) ä¿®é£¾ (æ–¹ä½è©é™¤å¤–)ã€‚', ] },
  { id: 'verb', type: 'content', title: 'å‹•è© (Verbs)', color: 'bg-red-300', icon: <Activity className="w-8 h-8" />, definition: 'è¡¨ç¤ºäººæˆ–äº‹ç‰©çš„å‹•ä½œã€è¡Œç‚ºã€å¿ƒç†æ´»å‹•æˆ–è®ŠåŒ–ç­‰ã€‚', categories: [ { name: 'å‹•ä½œè¡Œç‚º', examples: 'èªªã€ç¬‘ã€è·‘ã€å­¸ç¿’ã€ä¿è¡›' }, { name: 'å¿ƒç†æ´»å‹•', examples: 'æ„›ã€æ¨ã€æ€•ã€è¨å­ã€å¸Œæœ›' }, { name: 'ç™¼å±•è®ŠåŒ–', examples: 'å¢åŠ ã€ç™¼å±•ã€æ“´å¤§ã€æé«˜' }, { name: 'å­˜åœ¨/æ¶ˆå¤±', examples: 'æœ‰ã€ç„¡ã€åœ¨ã€å­˜åœ¨ã€ç™¼ç”Ÿ' }, { name: 'åˆ¤æ–·', examples: 'æ˜¯' }, ], features: [ 'ä¸»è¦å……ç•¶è¬‚èªã€‚', 'å—å‰¯è©ã€Œä¸ã€ã€ã€Œæ²’ã€ä¿®é£¾ã€‚', 'å¤šæ•¸å¯ä»¥å¸¶è³“èª (åŠç‰©å‹•è©)ã€‚', ] },
  { id: 'adj', type: 'content', title: 'å½¢å®¹è© (Adjectives)', color: 'bg-yellow-300', icon: <Star className="w-8 h-8" />, definition: 'è¡¨ç¤ºäº‹ç‰©çš„å½¢ç‹€ã€æ€§è³ªã€ç‹€æ…‹ç­‰ã€‚', categories: [ { name: 'æ€§è³ª', examples: 'å¥½ã€å£ã€å¤§ã€å°ã€é«˜ã€ä½' }, { name: 'ç‹€æ…‹', examples: 'é›ªç™½ã€é€šç´…ã€å†°æ¶¼' }, ], features: [ 'ä¸»è¦å……ç•¶è¬‚èªã€å®šèªã€‚', 'ä¸€èˆ¬å—å‰¯è©ã€Œä¸ã€ã€ã€Œå¾ˆã€ä¿®é£¾ã€‚', 'éƒ¨åˆ†å¯ä»¥é‡ç–Š (å¦‚ï¼šæ¸…æ¸…æ¥šæ¥š)ã€‚', ] },
  { id: 'adv', type: 'content', title: 'å‰¯è© (Adverbs)', color: 'bg-orange-300', icon: <Zap className="w-8 h-8" />, definition: 'ç”¨ä¾†ä¿®é£¾ã€é™åˆ¶å‹•è©æˆ–å½¢å®¹è©ï¼Œè¡¨ç¤ºç¨‹åº¦ã€ç¯„åœã€æ™‚é–“ç­‰ã€‚', categories: [ { name: 'ç¨‹åº¦å‰¯è©', examples: 'å¾ˆã€å¤ªã€éå¸¸ã€ååˆ†' }, { name: 'ç¯„åœå‰¯è©', examples: 'éƒ½ã€å…¨ã€åªã€å…‰' }, { name: 'æ™‚é–“å‰¯è©', examples: 'å·²ç¶“ã€æ›¾ç¶“ã€å°‡è¦ã€ç«‹åˆ»' }, { name: 'å¦å®šå‰¯è©', examples: 'ä¸ã€æ²’ã€åˆ¥' }, ], features: [ 'ä¸»è¦å……ç•¶ç‹€èªï¼Œä¿®é£¾è¬‚èªã€‚', 'ä¸èƒ½å–®ç¨æˆå¥ã€‚', 'ä¸€èˆ¬ä¸èƒ½å—ç¨‹åº¦å‰¯è©ä¿®é£¾ï¼ˆå¦‚ä¸èƒ½èªªã€Œå¾ˆå·²ç¶“ã€ï¼‰ã€‚' ] },
  { id: 'pronoun', type: 'content', title: 'ä»£è© (Pronouns)', color: 'bg-teal-300', icon: <User className="w-8 h-8" />, definition: 'å…·æœ‰ä»£æ›¿ã€æŒ‡ç¤ºä½œç”¨çš„è©ã€‚', categories: [ { name: 'äººç¨±ä»£è©', examples: 'æˆ‘ã€ä½ ã€ä»–ã€æˆ‘å€‘ã€å¤§å®¶' }, { name: 'æŒ‡ç¤ºä»£è©', examples: 'é€™ã€é‚£ã€é€™è£¡ã€é‚£è£¡' }, { name: 'ç–‘å•ä»£è©', examples: 'èª°ã€ç”šéº¼ã€å“ªè£¡ã€æ€éº¼' }, ], features: [ 'å¯ä»£æ›¿åè©ã€å‹•è©ã€å½¢å®¹è©ã€æ•¸é‡è©ç­‰ã€‚', 'èªæ³•åŠŸèƒ½èˆ‡æ‰€ä»£æ›¿çš„è©ç›¸åŒã€‚' ] },
  { id: 'num_quant', type: 'content', title: 'æ•¸è©èˆ‡é‡è© (Num/Quant)', color: 'bg-indigo-300', icon: <Hash className="w-8 h-8" />, definition: 'æ•¸è©è¡¨ç¤ºæ•¸ç›®å’Œæ¬¡åºï¼›é‡è©è¡¨ç¤ºè¨ˆç®—å–®ä½ã€‚', categories: [ { name: 'åŸºæ•¸è©', examples: 'ä¸€ã€äºŒã€ç™¾ã€è¬' }, { name: 'åºæ•¸è©', examples: 'ç¬¬ä¸€ã€åˆäº”' }, { name: 'åé‡è©', examples: 'å€‹ã€éš»ã€å¼µã€æœ¬ (ä¿®é£¾äº‹ç‰©)' }, { name: 'å‹•é‡è©', examples: 'æ¬¡ã€å›ã€è¶Ÿã€é (ä¿®é£¾å‹•ä½œ)' }, ], features: [ 'æ•¸è©å’Œé‡è©å¸¸çµåˆæˆã€Œæ•¸é‡çŸ­èªã€ï¼ˆå¦‚ï¼šä¸‰å€‹äººã€å»ä¸€æ¬¡ï¼‰ã€‚', 'é‡è©é‡ç–Šè¡¨ç¤ºã€Œæ¯ä¸€ã€çš„æ„æ€ï¼ˆå¦‚ï¼šå€‹å€‹ã€æ¢æ¢ï¼‰ã€‚' ] },
  { id: 'prep', type: 'function', title: 'ä»‹è© (Prepositions)', color: 'bg-pink-300', icon: <ArrowRight className="w-8 h-8" />, definition: 'ç”¨åœ¨åè©æˆ–ä»£è©å‰é¢ï¼Œå¼•é€²å‹•ä½œçš„å°è±¡ã€æ™‚é–“ã€è™•æ‰€ç­‰ã€‚', categories: [ { name: 'å¼•é€²å°è±¡', examples: 'æŠŠã€è¢«ã€å°ã€å°æ–¼ã€é—œæ–¼' }, { name: 'å¼•é€²è™•æ‰€/æ™‚é–“', examples: 'åœ¨ã€å¾ã€å‘ã€å¾€ã€ç•¶' }, { name: 'å¼•é€²æ–¹å¼/ä¾æ“š', examples: 'æŒ‰ã€æŒ‰ç…§ã€æ ¹æ“šã€é€šé' }, ], features: [ 'ä¸èƒ½å–®ç¨å……ç•¶å¥å­æˆåˆ†ã€‚', 'å¿…é ˆçµ„æˆã€Œä»‹è©çŸ­èªã€ä¿®é£¾å‹•è©æˆ–å½¢å®¹è©ã€‚', 'ä¸èƒ½é‡ç–Šã€‚' ] },
  { id: 'conj', type: 'function', title: 'é€£è© (Conjunctions)', color: 'bg-purple-300', icon: <LinkIcon className="w-8 h-8" />, definition: 'é€£æ¥è©ã€çŸ­èªæˆ–å¥å­ï¼Œè¡¨ç¤ºæŸç¨®é‚è¼¯é—œä¿‚ã€‚', categories: [ { name: 'ä¸¦åˆ—é—œä¿‚', examples: 'å’Œã€è·Ÿã€èˆ‡ã€è€Œä¸”' }, { name: 'é¸æ“‡é—œä¿‚', examples: 'æˆ–è€…ã€é‚„æ˜¯' }, { name: 'è½‰æŠ˜é—œä¿‚', examples: 'é›–ç„¶ã€ä½†æ˜¯ã€ä¸é' }, { name: 'å› æœé—œä¿‚', examples: 'å› ç‚ºã€æ‰€ä»¥ã€æ—¢ç„¶' }, ], features: [ 'åªæœ‰é€£æ¥ä½œç”¨ï¼Œä¸èµ·ä¿®é£¾æˆ–è£œå……ä½œç”¨ã€‚', 'ä½ç½®æ¯”è¼ƒå›ºå®šã€‚' ] },
  { id: 'particle', type: 'function', title: 'åŠ©è© (Particles)', color: 'bg-lime-300', icon: <MessageCircle className="w-8 h-8" />, definition: 'é™„è‘—åœ¨è©ã€çŸ­èªæˆ–å¥å­å¾Œé¢ï¼Œè¡¨ç¤ºçµæ§‹é—œä¿‚æˆ–å‹•æ…‹ç­‰ã€‚', categories: [ { name: 'çµæ§‹åŠ©è©', examples: 'çš„ (ä¿®é£¾åè©)ã€åœ° (ä¿®é£¾å‹•è©)ã€å¾— (è£œèª)' }, { name: 'å‹•æ…‹åŠ©è©', examples: 'è‘— (é€²è¡Œ)ã€äº† (å®Œæˆ)ã€é (ç¶“æ­·)' }, { name: 'èªæ°£åŠ©è©', examples: 'å—ã€å‘¢ã€å§ã€å•Š (é€šå¸¸åœ¨å¥æœ«)' }, ], features: [ 'è®€è¼•è²ã€‚', 'æ²’æœ‰å¯¦éš›æ„ç¾©ï¼Œåªè¡¨èªæ³•åŠŸèƒ½ã€‚', 'ä½ç½®å›ºå®šï¼Œä¸èƒ½ç§»å‹•ã€‚' ] },
  { id: 'interj', type: 'function', title: 'å˜†è©èˆ‡æ“¬è²è©', color: 'bg-cyan-300', icon: <Mic className="w-8 h-8" />, definition: 'è¡¨ç¤ºæ„Ÿå˜†ã€å‘¼å–šæ‡‰ç­”æˆ–æ‘¹æ“¬è²éŸ³çš„è©ã€‚', categories: [ { name: 'å˜†è©', examples: 'å”‰ã€å•Šã€å“å‘€ã€å“¼ (è¡¨å„é¡æƒ…æ„Ÿ)' }, { name: 'æ“¬è²è©', examples: 'å“ˆå“ˆã€æ±ªæ±ªã€æ·…ç€ã€è½Ÿéš†' }, ], features: [ 'ç¨ç«‹æ€§å¼·ï¼Œé€šå¸¸ä¸èˆ‡å…¶ä»–è©çµ„åˆã€‚', 'å¯ç¨ç«‹æˆå¥ã€‚' ] },
];

const WORD_PAIRS_DATA = [
  { id: 1, wordA: 'å…‰æ˜', posA: 'åè©', wordB: 'å…‰äº®', posB: 'å½¢å®¹è©', explanation: 'å…‰æ˜ï¼šæŒ‡äº®å…‰(N)æˆ–æ­£ç¾©çš„(Adj)ï¼Œæ­¤è™•å°æ¯”é€šå¸¸ä½œåè©ç”¨(å¦‚ï¼šå‰é€”å…‰æ˜)ï¼›å…‰äº®ï¼šæ˜äº®(Adj)ã€‚' },
  { id: 2, wordA: 'ç²¾ç¥', posA: 'åè©', wordB: 'ç²¾ç·»', posB: 'å½¢å®¹è©', explanation: 'ç²¾ç¥ï¼šæŒ‡æ„è­˜/å®—æ—¨(N)ï¼›ç²¾ç·»ï¼šç²¾å·§ç´°ç·»(Adj)ã€‚' },
  { id: 3, wordA: 'ç²‰ç¢', posA: 'å½¢å®¹è©', wordB: 'æ‰“ç¢', posB: 'å‹•è©', explanation: 'ç²‰ç¢ï¼šç¢å¾—åƒç²‰ä¸€æ¨£(Adj/V)ï¼›æ‰“ç¢ï¼šé€²è¡Œæ‰“çš„å‹•ä½œè‡´ç¢(V)ã€‚' },
  { id: 4, wordA: 'èªªæ˜', posA: 'å‹•è©', wordB: 'èªªæ˜æ›¸', posB: 'åè©', explanation: 'èªªæ˜ï¼šè§£é‡‹æ¸…æ¥š(V)ï¼›èªªæ˜æ›¸ï¼šä»‹ç´¹ç‰©å“çš„æ–‡ä»¶(N)ã€‚' },
  { id: 5, wordA: 'è‘—ä½œ', posA: 'åè©', wordB: 'è‘—å', posB: 'å½¢å®¹è©', explanation: 'è‘—ä½œï¼šä½œå“(N)ï¼›è‘—åï¼šæœ‰å(Adj)ã€‚' },
  { id: 6, wordA: 'ç”¨åŠŸ', posA: 'å½¢å®¹è©', wordB: 'ç”¨æ„', posB: 'åè©', explanation: 'ç”¨åŠŸï¼šåŠªåŠ›å­¸ç¿’(Adj)ï¼›ç”¨æ„ï¼šæ„åœ–/ä¼åœ–(N)ã€‚' },
  { id: 7, wordA: 'è¡¨é¢', posA: 'åè©', wordB: 'è¡¨ç¤º', posB: 'å‹•è©', explanation: 'è¡¨é¢ï¼šç‰©é«”è·Ÿå¤–ç•Œæ¥è§¸çš„éƒ¨åˆ†(N)ï¼›è¡¨ç¤ºï¼šé¡¯å‡ºæ€æƒ³æ„Ÿæƒ…(V)ã€‚' },
  { id: 8, wordA: 'ä¾¿åˆ©', posA: 'å½¢å®¹è©', wordB: 'ä¾¿åˆ©åº—', posB: 'åè©', explanation: 'ä¾¿åˆ©ï¼šæ–¹ä¾¿(Adj)ï¼›ä¾¿åˆ©åº—ï¼šå•†åº—åç¨±(N)ã€‚' },
];

const SENTENCE_DATA = [
  { id: 1, text: "å„__ç¨®æ–‡é«”å„æœ‰__å…¶ç‰¹é»ï¼Œå„æœ‰ä¸åŒçš„ä½œç”¨ã€‚", targets: [ { word: "å„", answer: "ä»£è©", explain: "æŒ‡ä»£ä¸Šè¿°çš„æ¯ä¸€ç¨®ã€‚" }, { word: "æœ‰", answer: "å‹•è©", explain: "è¡¨ç¤ºå­˜åœ¨æˆ–æ“æœ‰ã€‚" } ] },
  { id: 2, text: "é€™__å€‹__é“ç†é›£é“ä½ é‚„ä¸æ¸…æ¥šå—__ï¼Ÿ", targets: [ { word: "é€™", answer: "ä»£è©", explain: "æŒ‡ç¤ºä»£è©ï¼ŒæŒ‡è¿‘è™•çš„äº‹ç‰©ã€‚" }, { word: "å€‹", answer: "é‡è©", explain: "åé‡è©ï¼Œä¿®é£¾é“ç†ã€‚" }, { word: "å—", answer: "åŠ©è©", explain: "èªæ°£åŠ©è©ï¼Œè¡¨ç¤ºç–‘å•ã€‚" } ] },
  { id: 3, text: "æ˜å¤©å¦‚æœä¸‹é›¨ï¼Œé‹å‹•æœƒ__åªå¥½å»¶æœŸèˆ‰è¡Œ__ã€‚", targets: [ { word: "é‹å‹•æœƒ", answer: "åè©", explain: "æ´»å‹•åç¨±ï¼Œä½œä¸»èªã€‚" }, { word: "èˆ‰è¡Œ", answer: "å‹•è©", explain: "é€²è¡Œæ´»å‹•ï¼Œä½œè¬‚èªã€‚" } ] },
  { id: 4, text: "å¥½äº†__ï¼Œä¸è¦è€èªªé€™äº›äº‹äº†__ï¼", targets: [ { word: "äº†", answer: "åŠ©è©", explain: "èªæ°£åŠ©è©ï¼Œè¡¨ç¤ºæ„Ÿå˜†æˆ–è®ŠåŒ–ã€‚" }, { word: "äº†", answer: "åŠ©è©", explain: "èªæ°£åŠ©è©ï¼Œè¡¨ç¤ºå‹•ä½œå®Œæˆæˆ–è®ŠåŒ–ã€‚" } ] },
  { id: 5, text: "æç“Šçš„å­—å¯«å¾—__å¾ˆå¥½ï¼Œå¾—__äº†ä¸€ç­‰çã€‚", targets: [ { word: "å¾—", answer: "åŠ©è©", explain: "çµæ§‹åŠ©è©ï¼Œé€£æ¥è£œèª(å¾ˆå¥½)ã€‚" }, { word: "å¾—", answer: "å‹•è©", explain: "å¾—åˆ°ï¼Œç²å¾—ã€‚" } ] },
  { id: 6, text: "æˆ‘å€‘è¦åš´è‚…__æ ¡ç´€ï¼Œåš´æ ¼åŸ·è¡Œ__å­¸æ ¡çš„è¦ç« åˆ¶åº¦ã€‚", targets: [ { word: "åš´è‚…", answer: "å½¢å®¹è©", explain: "èŠé‡ã€ä»¤äººæ•¬ç•(é€™è£æ´»ç”¨ç‚ºå‹•è©ï¼šä½¿åš´è‚…)ã€‚ä½†è‹¥æŒ‰åŸºç¤è©æ€§ï¼Œåš´è‚…ç‚ºå½¢å®¹è©ã€‚" }, { word: "åŸ·è¡Œ", answer: "å‹•è©", explain: "å¯¦æ–½ï¼Œå¯¦è¡Œã€‚" } ] }
];

const QUIZ_DATA = [
  { id: 1, question: "åˆ†è¾¨è©æ€§ï¼šã€Œå…‰æ˜ã€èˆ‡ã€Œå…‰äº®ã€", options: ["åè© / å½¢å®¹è©", "å½¢å®¹è© / å‹•è©", "å‹•è© / åè©", "å‰¯è© / å½¢å®¹è©"], correctIndex: 0, explanation: "ã€Œå…‰æ˜ã€å¸¸ä½œåè©(å¦‚ï¼šèµ°å‘å…‰æ˜)æˆ–å½¢å®¹è©(å…‰æ˜ç£Šè½)ï¼Œã€Œå…‰äº®ã€å´é‡æ–¼ç‹€æ…‹(å½¢å®¹è©)ã€‚æ ¹æ“šèª²æœ¬ç­”æ¡ˆï¼Œå…‰æ˜ç‚ºåè©ï¼Œå…‰äº®ç‚ºå½¢å®¹è©ã€‚" },
  { id: 2, question: "åˆ†è¾¨è©æ€§ï¼šã€Œèªªæ˜ã€èˆ‡ã€Œèªªæ˜æ›¸ã€", options: ["å‹•è© / å‹•è©", "åè© / å‹•è©", "å‹•è© / åè©", "å½¢å®¹è© / åè©"], correctIndex: 2, explanation: "ã€Œèªªæ˜ã€æ˜¯å‹•ä½œï¼Œè§£é‡‹æ¸…æ¥š(å‹•è©)ï¼›ã€Œèªªæ˜æ›¸ã€æ˜¯ç‰©ä»¶åç¨±(åè©)ã€‚" },
  { id: 3, question: "å¥å­åˆ†æï¼šã€Œé€™ã€å€‹é“ç†é›£é“ä½ é‚„ä¸æ¸…æ¥šå—ï¼Ÿ", options: ["åè©", "å½¢å®¹è©", "ä»£è©", "é‡è©"], correctIndex: 2, explanation: "ã€Œé€™ã€æ˜¯æŒ‡ç¤ºä»£è©ï¼Œç”¨ä¾†æŒ‡ä»£æ¯”è¼ƒè¿‘çš„äººæˆ–äº‹ç‰©ã€‚" },
  { id: 4, question: "å¥å­åˆ†æï¼šæç“Šçš„å­—å¯«ã€Œå¾—ã€å¾ˆå¥½ï¼Œå¾—äº†ä¸€ç­‰çã€‚", options: ["å‹•è©", "åŠ©è©", "å½¢å®¹è©", "å‰¯è©"], correctIndex: 1, explanation: "ç¬¬ä¸€å€‹ã€Œå¾—ã€ç”¨åœ¨å‹•è©ã€Œå¯«ã€å¾Œï¼Œå¼•å‡ºè£œèªã€Œå¾ˆå¥½ã€ï¼Œæ˜¯çµæ§‹åŠ©è©ã€‚" },
  { id: 5, question: "å¥å­åˆ†æï¼šæ˜å¤©å¦‚æœä¸‹é›¨ï¼Œé‹å‹•æœƒåªå¥½å»¶æœŸã€Œèˆ‰è¡Œã€ã€‚", options: ["åè©", "å‹•è©", "å½¢å®¹è©", "ä»‹è©"], correctIndex: 1, explanation: "ã€Œèˆ‰è¡Œã€è¡¨ç¤ºé€²è¡ŒæŸç¨®æ´»å‹•ï¼Œæ˜¯å‹•è©ã€‚" }
];

// --- å°å‹ UI å…ƒä»¶ï¼ˆç°¡åŒ–ï¼‰ ---
const NeuButton = ({ children, onClick, className = "", active = false, disabled = false }) => (
  <button onClick={onClick} disabled={disabled} className={`px-4 py-2 font-bold text-black border-4 border-black transition-all ${!disabled ? 'active:translate-x-1 active:translate-y-1 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-0.5' : 'opacity-50 cursor-not-allowed border-gray-400 bg-gray-200'} ${active ? 'bg-black text-white' : 'bg-white'} ${className}` }>{children}</button>
);

const NeuCard = ({ title, children, color = "bg-white", className = "" }) => (
  <div className={`border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 mb-8 ${color} ${className}`}>
    {title && <h3 className="text-2xl font-black mb-4 border-b-4 border-black pb-2 uppercase tracking-wide">{title}</h3>}
    <div className="font-medium text-black">{children}</div>
  </div>
);

const AccordionItem = ({ title, children, isOpen, onClick, color }) => (
  <div className="mb-4">
    <button onClick={onClick} className={`w-full text-left p-4 border-4 border-black flex justify-between items-center font-bold text-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all ${color}`}>
      {title}
      {isOpen ? <ChevronUp className="w-6 h-6 border-2 border-black rounded-full bg-white" /> : <ChevronDown className="w-6 h-6" />}
    </button>
    {isOpen && (<div className="border-x-4 border-b-4 border-black p-4 bg-white font-medium">{children}</div>)}
  </div>
);

const InteractiveWordPair = ({ pair, revealed, onToggle }) => {
  const [guessA, setGuessA] = React.useState(null);
  const [guessB, setGuessB] = React.useState(null);
  const [showExplanation, setShowExplanation] = React.useState(false);
  const checkGuess = (wordType, guess) => {
    const correct = wordType === 'A' ? pair.posA : pair.posB;
    const isCorrect = guess === correct;
    if (wordType === 'A') setGuessA(isCorrect ? 'correct' : 'wrong'); else setGuessB(isCorrect ? 'correct' : 'wrong');
  };
  const reset = (e) => { e.stopPropagation(); setGuessA(null); setGuessB(null); setShowExplanation(false); onToggle(); };
  if (!revealed) return (
    <div onClick={onToggle} className="relative cursor-pointer border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 transition-all bg-yellow-100 hover:bg-yellow-200">
      <div className="p-4 border-b-4 border-black flex justify-between items-center">
        <div className="font-black text-xl">{pair.id}. {pair.wordA} <span className="text-gray-400 mx-2">vs</span> {pair.wordB}</div>
        <div className="bg-black text-white px-2 py-1 text-xs font-bold rounded">é»æ“ŠæŒ‘æˆ°</div>
      </div>
      <div className="p-8 flex justify-center items-center"><div className="animate-bounce text-6xl font-black text-gray-400">?</div></div>
    </div>
  );
  return (
    <div className="border-4 border-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] bg-white relative animate-fade-in translate-x-1 translate-y-1">
      <div className="bg-black text-white p-2 px-4 flex justify-between items-center">
        <span className="font-bold">è©ç¾©è¾¨æ #{pair.id}</span>
        <button onClick={reset} className="text-sm underline">æ”¶èµ·</button>
      </div>
      <div className="p-6 grid gap-6">
        <div className={`p-4 border-2 border-black rounded ${guessA === 'correct' ? 'bg-green-100' : 'bg-gray-50'}`}>
          <div className="flex justify-between items-center mb-3"><span className="text-2xl font-black text-blue-800">{pair.wordA}</span>{guessA === 'correct' && <CheckCircle className="text-green-600" />}{guessA === 'wrong' && <XCircle className="text-red-500" />}</div>
          {guessA !== 'correct' ? (<div className="flex flex-wrap gap-2">{['åè©','å‹•è©','å½¢å®¹è©'].map(opt => (<button key={opt} onClick={() => checkGuess('A', opt)} className="px-3 py-1 bg-white border-2 border-black shadow-[2px_2px_0px_0px_#000] hover:translate-y-0.5 hover:shadow-none font-bold text-sm">{opt}</button>))}</div>) : (<div className="font-black text-xl">{pair.posA}</div>)}
        </div>
        <div className={`p-4 border-2 border-black rounded ${guessB === 'correct' ? 'bg-green-100' : 'bg-gray-50'}`}>
          <div className="flex justify-between items-center mb-3"><span className="text-2xl font-black text-pink-800">{pair.wordB}</span>{guessB === 'correct' && <CheckCircle className="text-green-600" />}{guessB === 'wrong' && <XCircle className="text-red-500" />}</div>
          {guessB !== 'correct' ? (<div className="flex flex-wrap gap-2">{['åè©','å‹•è©','å½¢å®¹è©'].map(opt => (<button key={opt} onClick={() => checkGuess('B', opt)} className="px-3 py-1 bg-white border-2 border-black shadow-[2px_2px_0px_0px_#000] hover:translate-y-0.5 hover:shadow-none font-bold text-sm">{opt}</button>))}</div>) : (<div className="font-black text-xl">{pair.posB}</div>)}
        </div>
        {(guessA === 'correct' && guessB === 'correct') || showExplanation ? (
          <div className="animate-fade-in bg-yellow-50 p-4 border-2 border-black border-dashed"><h4 className="font-bold mb-2 bg-black text-white inline-block px-2">è©³è§£ï¼š</h4><p className="leading-relaxed">{pair.explanation}</p></div>
        ) : (<button onClick={() => setShowExplanation(true)} className="w-full text-center text-gray-400 font-bold hover:text-black mt-2">è·³éä¸¦æŸ¥çœ‹è§£é‡‹</button>)}
      </div>
    </div>
  );
};

const InteractiveSentence = ({ item }) => {
  const [revealedIndices, setRevealedIndices] = React.useState({});
  const [showAll, setShowAll] = React.useState(false);
  const toggleReveal = (idx) => setRevealedIndices(prev=>({...prev,[idx]:!prev[idx]}));
  return (
    <div className="border-4 border-black bg-white shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
      <div className="bg-green-100 border-b-4 border-black p-4 flex justify-between items-center"><span className="font-black text-2xl">å¥å¼ #{item.id}</span><button onClick={()=>setShowAll(!showAll)} className="bg-black text-white px-4 py-1 font-bold hover:bg-gray-800 transition text-sm">{showAll? 'éš±è—æ‰€æœ‰è§£æ':'ä¸€éµé¡¯ç¤ºå…¨è§£'}</button></div>
      <div className="p-6">
        <div className="font-serif mb-6 leading-loose bg-gray-50 p-6 border-2 border-gray-200 rounded text-justify">{item.text.split('__').map((part, index)=> (<React.Fragment key={index}>{part}{index < item.targets.length && (<span className="relative inline-block mx-2 align-middle">{!revealedIndices[index] && !showAll ? (<button onClick={()=>toggleReveal(index)} className="animate-pulse bg-blue-100 border-b-4 border-black px-3 py-0 hover:bg-blue-200 transition-colors font-bold text-blue-800 flex items-center gap-1">{item.targets[index].word} <HelpCircle size={16} /></button>) : (<span className="bg-yellow-200 border-2 border-black px-2 py-1 rounded font-bold shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] animate-fade-in inline-flex flex-col items-center leading-none"><span className="text-xs mb-1 text-gray-600">({item.targets[index].answer})</span><span>{item.targets[index].word}</span></span> )}</span>)}</React.Fragment>))}</div>
        <div className="space-y-2">{item.targets.map((t, idx)=>{const isRevealed = revealedIndices[idx] || showAll; if (!isRevealed) return null; return (<div key={idx} className="animate-fade-in flex items-start gap-3 bg-white p-3 border-2 border-black border-dotted"><div className="bg-black text-white w-6 h-6 flex items-center justify-center font-bold rounded-full shrink-0 text-sm">{idx+1}</div><div><span className="font-bold text-lg mr-2 text-blue-700">{t.answer}</span><span className="">{t.explain}</span></div></div>)})}</div>
      </div>
    </div>
  );
};

function DSEChineseGuide(){
  const [fontSize,setFontSize]=React.useState(24);
  const [showHighlights,setShowHighlights]=React.useState(true);
  const [sidebarOpen,setSidebarOpen]=React.useState(true);
  const [activeSection,setActiveSection]=React.useState('intro');
  const [theoryType,setTheoryType]=React.useState('content');
  const [openAccordions,setOpenAccordions]=React.useState({});
  const [revealedPairs,setRevealedPairs]=React.useState({});
  const [quizAnswers,setQuizAnswers]=React.useState({});
  const [quizSubmitted,setQuizSubmitted]=React.useState({});
  const toggleAccordion = (id)=> setOpenAccordions(prev=>({...prev,[id]:!prev[id]}));
  const togglePairReveal=(id)=> setRevealedPairs(prev=>({...prev,[id]:!prev[id]}));
  const handleQuizSelect=(qId,optIdx)=>{ if (quizSubmitted[qId]) return; setQuizAnswers(prev=>({...prev,[qId]:optIdx})); };
  const submitQuizQuestion=(qId)=> setQuizSubmitted(prev=>({...prev,[qId]:true}));
  const resetQuiz=()=>{ setQuizAnswers({}); setQuizSubmitted({}); };
  const contentStyle = { fontSize: `${fontSize}px`, lineHeight: '1.6' };
  const highlightClass = showHighlights ? "bg-yellow-300 px-1 mx-0.5 rounded border-2 border-black border-dashed" : "";
  return (
    <div className="flex min-h-screen bg-stone-100 font-sans text-gray-900 overflow-hidden">
      <button onClick={()=>setSidebarOpen(!sidebarOpen)} className="fixed top-4 left-4 z-50 p-2 bg-black text-white border-2 border-white rounded-md md:hidden shadow-[4px_4px_0px_0px_#fff]">{sidebarOpen ? <X /> : <Menu />}</button>
      <aside className={`fixed top-0 left-0 h-full bg-white border-r-4 border-black z-40 transition-transform duration-300 ease-in-out w-80 overflow-y-auto ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'}`}>
        <div className="p-6">
          <div className="mb-8 text-center border-b-4 border-black pb-4"><h1 className="text-3xl font-black tracking-tighter uppercase bg-yellow-300 inline-block px-2 border-2 border-black transform -rotate-2">DSE ä¸­æ–‡ç§‘</h1><p className="mt-2 font-bold text-sm">è©æ€§æ”»ç•¥æŒ‡å—</p></div>
          <div className="mb-8 space-y-6">
            <div className="p-4 bg-blue-100 border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
              <label className="flex items-center gap-2 font-bold mb-2 text-sm"><Type size={18} /> å­—é«”å¤§å°: {fontSize}px</label>
              <input type="range" min="18" max="48" value={fontSize} onChange={(e)=>setFontSize(parseInt(e.target.value))} className="w-full accent-black h-4 bg-white border-2 border-black appearance-none rounded-full cursor-pointer" />
            </div>
            <button onClick={()=>setShowHighlights(!showHighlights)} className={`w-full flex items-center justify-center gap-2 p-3 font-bold border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all ${showHighlights ? 'bg-pink-300' : 'bg-gray-200'}`}>
              {showHighlights ? <Eye size={20}/> : <EyeOff size={20}/>} {showHighlights ? 'éš±è—é‡é»' : 'é¡¯ç¤ºé‡é»'}
            </button>
          </div>
          <nav className="space-y-3">{[{ id: 'intro', label: '1. å¯¦è©èˆ‡è™›è©', icon: <BookOpen size={20}/> },{ id: 'pairs', label: '2. è©ç¾©è¾¨æ (A/Bçµ„)', icon: <Brain size={20}/> },{ id: 'sentences', label: '3. å¥å¼åˆ¤æ–·', icon: <FileText size={20}/> },{ id: 'quiz', label: '4. äº’å‹•ç·´ç¿’å ´', icon: <Star size={20}/> },].map(item=> (<button key={item.id} onClick={()=>setActiveSection(item.id)} className={`w-full flex items-center gap-3 p-3 font-bold border-4 border-black transition-all hover:translate-x-1 ${activeSection === item.id ? 'bg-green-400 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]' : 'bg-white hover:bg-green-100'}`}>{item.icon}{item.label}</button>))}</nav>
        </div>
      </aside>
      <main className={`flex-1 p-6 md:p-12 transition-all duration-300 overflow-y-auto bg-stone-100 min-h-screen ${sidebarOpen ? 'md:ml-80' : 'ml-0'}`} style={contentStyle}>
        <div className="max-w-4xl mx-auto space-y-12 pb-24">
          {activeSection === 'intro' && (<section className="animate-fade-in"><div className="mb-8 border-l-8 border-black pl-6"><h2 className="text-4xl font-black mb-2">ç¬¬ä¸€ç« ï¼šå¯¦è©èˆ‡è™›è©</h2><p className="text-xl font-bold text-gray-600">æŒæ¡åŸºç¤ï¼Œæ–¹èƒ½ç™¾æˆ°ç™¾å‹ï¼</p></div>
          <div className="flex gap-4 mb-8"><button onClick={()=>setTheoryType('content')} className={`flex-1 py-4 font-black text-xl border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all ${theoryType === 'content' ? 'bg-blue-300 translate-y-1 shadow-none' : 'bg-white hover:-translate-y-1'}`}>å¯¦è©ç¯‡ (Content)</button><button onClick={()=>setTheoryType('function')} className={`flex-1 py-4 font-black text-xl border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all ${theoryType === 'function' ? 'bg-pink-300 translate-y-1 shadow-none' : 'bg-white hover:-translate-y-1'}`}>è™›è©ç¯‡ (Function)</button></div>
          <div className="grid grid-cols-1 gap-6">{THEORY_DATA.filter(item=>item.type===theoryType).map(item => (<AccordionItem key={item.id} title={item.title} isOpen={openAccordions[item.id]} onClick={()=>toggleAccordion(item.id)} color={item.color}><div className="space-y-4"><div className="flex items-start gap-4"><div className="hidden md:block p-2 bg-black text-white rounded-lg shrink-0">{item.icon}</div><div><p className="font-bold border-b-2 border-black pb-2 inline-block text-lg mb-2">å®šç¾©</p><p className="text-lg leading-relaxed">{item.definition}</p></div></div><div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"><div className="bg-white border-2 border-black p-4 rounded shadow-[4px_4px_0px_0px_#ddd]"><h4 className="font-black mb-2 bg-black text-white inline-block px-2 transform -rotate-1">åˆ†é¡ä¾‹å­</h4><ul className="list-disc list-inside space-y-2">{item.categories.map((cat,idx)=>(<li key={idx}><span className={highlightClass}>{cat.name}</span>ï¼š<span className="text-gray-700">{cat.examples}</span></li>))}</ul></div><div className="bg-white border-2 border-black p-4 rounded shadow-[4px_4px_0px_0px_#ddd]"><h4 className="font-black mb-2 bg-black text-white inline-block px-2 transform rotate-1">èªæ³•ç‰¹é»</h4><ul className="list-decimal list-inside space-y-2">{item.features.map((feat,idx)=>(<li key={idx} className={idx%2===0?"bg-gray-50 p-1 rounded":"p-1"}>{feat}</li>))}</ul></div></div></div></AccordionItem>))}</div></section>)}
          {activeSection==='pairs' && (<section className="animate-fade-in"><div className="mb-8 border-l-8 border-black pl-6"><div className="flex items-center gap-4 mb-2"><h2 className="text-4xl font-black">ç¬¬äºŒç« ï¼šè©ç¾©è¾¨æ</h2><span className="bg-black text-white text-sm font-bold px-3 py-1 rounded-full transform rotate-3">Açµ„ & Bçµ„ é€šç”¨</span></div><p className="text-xl font-bold text-gray-600">é»æ“Šå¡ç‰‡æŒ‘æˆ°åˆ¤æ–·è©æ€§ï¼</p></div><div className="grid grid-cols-1 md:grid-cols-2 gap-6">{WORD_PAIRS_DATA.map(pair=>(<InteractiveWordPair key={pair.id} pair={pair} revealed={revealedPairs[pair.id]} onToggle={()=>togglePairReveal(pair.id)} />))}</div></section>)}
          {activeSection==='sentences' && (<section className="animate-fade-in"><div className="mb-8 border-l-8 border-black pl-6"><div className="flex items-center gap-4 mb-2"><h2 className="text-4xl font-black">ç¬¬ä¸‰ç« ï¼šå¥å¼åˆ¤æ–·</h2><span className="bg-black text-white text-sm font-bold px-3 py-1 rounded-full transform -rotate-2">Açµ„ & Bçµ„ é€šç”¨</span></div><p className="text-xl font-bold text-gray-600">é»æ“Šå¥å­ä¸­çš„é—œéµè© (?) ä¾†æŸ¥çœ‹ç­”æ¡ˆã€‚</p></div><div className="space-y-8">{SENTENCE_DATA.map(item=>(<InteractiveSentence key={item.id} item={item} />))}</div></section>)}
          {activeSection==='quiz' && (<section className="animate-fade-in"><div className="mb-8 border-l-8 border-black pl-6 flex justify-between items-end"><div><h2 className="text-4xl font-black mb-2">ç¬¬å››ç« ï¼šç·´ç¿’å ´</h2><p className="text-xl font-bold text-gray-600">å¯¦æˆ°æ¸¬è©¦ï¼Œä¸è«–å°éŒ¯çš†æœ‰è©³è§£ã€‚</p></div><NeuButton onClick={resetQuiz} className="bg-red-300"><RefreshCcw className="inline mr-2" size={18}/> é‡ç½®ç·´ç¿’</NeuButton></div><div className="space-y-12">{QUIZ_DATA.map((q,index)=>{const isSubmitted=quizSubmitted[q.id]; const userAns=quizAnswers[q.id]; const isCorrect=userAns===q.correctIndex; return (<div key={q.id} className="relative"><div className="absolute -left-4 -top-4 bg-black text-white w-12 h-12 flex items-center justify-center font-black text-2xl border-4 border-white shadow-lg z-10">{index+1}</div><div className={`border-4 border-black bg-white p-8 pt-10 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] ${isSubmitted ? (isCorrect ? 'border-green-600' : 'border-red-500') : ''}`}><h3 className="text-2xl font-bold mb-6 pl-4">{q.question}</h3><div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">{q.options.map((opt,optIdx)=>(<button key={optIdx} onClick={()=>handleQuizSelect(q.id,optIdx)} disabled={isSubmitted} className={`p-4 text-left font-bold border-4 transition-all ${userAns===optIdx ? 'bg-black text-white border-black translate-x-1 translate-y-1 shadow-none' : 'bg-white border-black text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:-translate-y-1 hover:shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]'} ${isSubmitted && optIdx===q.correctIndex ? 'bg-green-500 text-white border-green-700' : ''} ${isSubmitted && userAns===optIdx && !isCorrect ? 'bg-red-500 text-white border-red-700' : ''} disabled:cursor-not-allowed` }><span className="mr-2">{String.fromCharCode(65+optIdx)}.</span> {opt}</button>))}</div>{!isSubmitted && (<div className="flex justify-end"><NeuButton onClick={()=>submitQuizQuestion(q.id)} className="bg-green-300 w-full md:w-auto" disabled={userAns===undefined}>æäº¤ç­”æ¡ˆ</NeuButton></div>)}{isSubmitted && (<div className={`mt-6 p-6 border-4 border-black animate-fade-in ${isCorrect ? 'bg-green-100' : 'bg-red-100'}`}><div className="flex items-center gap-2 font-black text-xl mb-2">{isCorrect ? <CheckCircle className="text-green-600"/> : <XCircle className="text-red-600"/>}{isCorrect ? 'ç­”å°äº†ï¼' : 'ç­”éŒ¯äº†ï¼ŒåŠ æ²¹ï¼'}</div><p className="font-bold">æ­£ç¢ºç­”æ¡ˆï¼š{String.fromCharCode(65+q.correctIndex)}</p><div className="mt-3 pt-3 border-t-2 border-black border-dashed"><p className="font-medium"><span className="bg-black text-white px-2 py-0.5 text-sm mr-2">è©³è§£</span> {q.explanation}</p></div></div>)}</div></div>);})}</div></section>)}
        </div>
      </main>
      <style>{`@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } } .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }`}</style>
    </div>
  );
}

// Render
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<DSEChineseGuide />);

    </script>
  </body>
</html>